div
  script(src=url_for(theme.asset.utils))
  script(src=url_for(theme.asset.main))

  if theme.translate.enable
    script(src=url_for(theme.asset.translate))

  if theme.medium_zoom
    script(src=url_for(theme.asset.medium_zoom))
  else if theme.fancybox
    script(src=url_for(theme.asset.fancybox_v4))

  if theme.instantpage
    script(src=url_for(theme.asset.instantpage), type='module')

  if theme.lazyload.enable
    script(src=url_for(theme.asset.lazyload))

  if theme.snackbar.enable
    script(src=url_for(theme.asset.snackbar))

  if theme.pangu.enable
    != partial("includes/third-party/pangu.pug", {}, { cache: true })
  if theme.asset.meting_api
    script.
      var meting_api = "!{theme.asset.meting_api}";

  //- é»‘è‰²æ¨¡å¼ç²’å­æ•ˆæœcanvas
  if theme.universe.enable
    canvas(id="universe")
    script(async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js")

  //- æ§åˆ¶å°æ‰“å°ä¿¡æ¯
  if theme.console.enable
    != partial("includes/anzhiyu/log-js.pug", {}, { cache: true })
  
  //- éšæœºæ–‡ç« 
  script(async src="/anzhiyu/random.js")

  //- é¡µè„šè®¡æ—¶å™¨
  if theme.footer.runtime.enable
    != partial("includes/third-party/runtime/runtime-js.pug", {}, { cache: true })

  //- search
  if theme.algolia_search.enable
    script(src=url_for(theme.asset.algolia_search_v4))
    script(src=url_for(theme.asset.instantsearch_v4))
    script(src=url_for(theme.asset.algolia_js))
  else if theme.local_search.enable
    script(src=url_for(theme.asset.local_search))

  .js-pjax
    if needLoadCountJs
      != partial("includes/third-party/card-post-count/index", {}, { cache: true })

    if loadSubJs
      include ./third-party/subtitle.pug

    include ./third-party/math/index.pug

    if commentsJsLoad
      include ./third-party/comments/js.pug
    
    input(type="hidden" name="page-type" id="page-type" value=(page.type ? page.type : (is_post() ? "post" : (is_category() ? "categories" : "anzhiyu"))))

  != partial("includes/third-party/prismjs", {}, { cache: true })

  if theme.aside.enable && theme.newest_comments.enable
    if theme.pjax.enable
      != partial("includes/third-party/newest-comments/index", {}, { cache: true })
    else if (!is_post() && page.aside !== false)
      != partial("includes/third-party/newest-comments/index", {}, { cache: true })
  //- æ°”æ³¡æ•ˆæœ
  if theme.bubble.enable
    script(async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js")
  if theme.visitorMail.enable
    - const mail = theme.visitorMail.mail
    script.
      var visitorMail = "#{mail}";
  //- æ ‡é¢˜å–èŒ
  if theme.diytitle.enable
    != partial("includes/anzhiyu/title-js.pug", {}, { cache: true })
  //- è¯„è®ºå¼¹å¹•
  if theme.comment_barrage_config.enable && theme.comments.use == 'Twikoo'
    != partial("includes/anzhiyu/commentBarrage-js.pug", {}, { cache: true })

  //- å³åˆ»ä¾èµ–waterfall
  script(async data-pjax src=url_for(theme.asset.waterfall))
  //- æ–‡ç« äºŒç»´ç 
  script(src='https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js')
  //- å³é”®èœå•
  != partial("includes/anzhiyu/rightmenu-js.pug", {}, { cache: true })
  include ./anzhiyu/anzhiyu-js.pug
  //- 51laç»Ÿè®¡&çµé›€ç»Ÿè®¡
  if (theme.LA.enable)
    script(charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js")
    script(src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous")
    - const ck = theme.LA.ck
    script.
      LA.init({id: "#{ck}", ck: "#{ck}"});
      new LingQue.Monitor().init({id: "#{theme.LA.LingQueMonitorID}", sendSuspicious:true});
  //- iconfontä¾èµ–
  link(rel="stylesheet" href=url_for(theme.asset.ali_iconfont_css))
  if (theme.icons && theme.icons.ali_iconfont_js)
    script(async src=url_for(theme.icons.ali_iconfont_js))

  != fragment_cache('injectBottom', function(){return injectHtml(theme.inject.bottom)})

  != partial("includes/third-party/effect", {}, { cache: true })

  != partial("includes/third-party/chat/index", {}, { cache: true })

  if theme.aplayerInject && theme.aplayerInject.enable
    if theme.pjax.enable || theme.aplayerInject.per_page
      include ./third-party/aplayer.pug
    else if page.aplayer
      include ./third-party/aplayer.pug

  if theme.pjax.enable
    != partial("includes/third-party/pjax", {}, { cache: true })

  if theme.busuanzi.site_uv || theme.busuanzi.site_pv || theme.busuanzi.page_pv
    script(async data-pjax src= theme.asset.busuanzi || '//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js')

  if is_current("/") && theme.greetingBox.enable
    #greetingBox 
    script.
      (()=>{
        //- åˆ›å»ºç›’å­
        let div = document.createElement("div");
        //- è®¾ç½®ID
        div.id = "greeting";
        //- è®¾ç½®class
        setTimeout(()=>{
          div.classList.add("shown");
        }, 1000)
        //- æ’å…¥ç›’å­
        let greetingBox = document.querySelector("#greetingBox");
        greetingBox.appendChild(div);
        const nowTime = new Date().getHours();
        let greetings = "";
        if (0 <= nowTime && nowTime <= 5) {
          greetings = "æ™šå®‰ğŸ˜´"
        } else if (6 <= nowTime && nowTime < 10) {
          greetings = "æ—©ä¸Šå¥½é¸­ğŸ‘‹, ç¥ä½ ä¸€å¤©å¥½å¿ƒæƒ…ï¼"
        } else if (10 === nowTime) {
          greetings = "ä¸Šåˆå¥½ğŸ‘‹, çŠ¶æ€å¾ˆå¥½ï¼Œé¼“åŠ±ä¸€ä¸‹ï½"
        } else if (11 === nowTime) {
          greetings = "11ç‚¹å¤šå•¦, åœ¨åšæŒä¸€ä¸‹å°±åƒé¥­å•¦ï½"
        } else if (12 <= nowTime && nowTime < 14) {
          greetings = "åˆå®‰ğŸ‘‹, å®è´"
        } else if (14 <= nowTime && nowTime < 18) {
          greetings = "ä¸‹åˆå¥½ğŸ‘‹, ç»§ç»­åŠ æ²¹å–”ã€‚"
        } else if (18 <= nowTime && nowTime < 19) {
          greetings = "ğŸŒˆå……å®çš„ä¸€å¤©è¾›è‹¦å•¦ï¼"
        } else if (19 === nowTime) {
          greetings = "19ç‚¹å–½, å¥–åŠ±ä¸€é¡¿ä¸°ç››çš„å¤§é¤å§ã€‚"
        } else if (20 <= nowTime && nowTime <= 24) {
          greetings = "æ™šä¸Šå¥½ğŸ‘‹, åœ¨å±äºè‡ªå·±çš„æ—¶é—´å¥½å¥½æ”¾æ¾ğŸ˜Œ~"
        } else {
          greetings = "æ™šä¸Šå¥½ğŸ‘‹"
        }
        div.innerHTML = greetings
        setTimeout(()=>{
          div.classList.remove("shown");
          setTimeout(()=>{
            greetingBox.remove()
          }, 500)
        }, 3000)
      })()
